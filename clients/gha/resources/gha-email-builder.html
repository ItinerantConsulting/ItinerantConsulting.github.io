

<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Email Builder CSS -->
		<link rel="stylesheet" href="gha-email-builder.css">

		<!-- Email Builder JS -->
		<script type="text/javascript" src="gha-email-builder.js"></script>

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

		<title>GHA Email Builder</title>
		<link rel="icon" type="image/png" href="favicon.ico" sizes="32x32" />
	</head>
	<body>

		<!--
		<header class="header">
			<div class="container">
				<div class="row">
					<div class="col">
						Header
					</div>
				</div>
			</div>
		</header>
		-->

		<section>
			<div class="container">
				<div class="row my-3">
					<div class="col-4">
						<h3>Template Inputs</h3>
					</div>
					<div class="col-3">
						<h3>Template Preview</h3>
					</div>
					<div class="col-5 text-right">
						<button onclick="desktopDevice()" type="button" class="btn btn-primary">Desktop Layout</button>
						<button onclick="tabletDevice()" type="button" class="btn btn-primary">Tablet Layout</button>
						<button onclick="mobileDevice()" type="button" class="btn btn-primary">Mobile Layout</button>
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-4">
						<div id="template-inputs">
							<!-- Email Preheader Input -->
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<label class="input-group-text" for="emailPreheaderUserSelection">Select Preheader</label>
								</div>
								<select onchange="emailPreheaderUserSelection()" class="custom-select" id="emailPreheaderUserSelection">
									<option value="none" selected>None</option>
									<option value="snippetTextAndViewOnlineLink">Snippet Text and View Online Link</option>
									<option value="snippetTextOnly">Snippet Text Only</option>
									<option value="viewOnlineLinkOnly">View Online Link Only</option>
								</select>
							</div>
							<div id="emailPreheaderTextareaInputs"></div>

							<hr>

							<!-- Email Header Input -->
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<label class="input-group-text" for="emailHeaderUserSelection">Select Header</label>
								</div>
								<select onchange="emailHeaderUserSelection()" class="custom-select" id="emailHeaderUserSelection">
									<option value="none" selected>None</option>
									<option value="defaultHeader">Default Header</option>
								</select>
							</div>
							<div id="emailHeaderTextareaInputs"></div>

							<hr>

							<!-- Email Tier Bar Input -->
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<label class="input-group-text" for="emailTierBarUserSelection">Select Tier Bar</label>
								</div>
								<select onchange="emailTierBarUserSelection()" class="custom-select" id="emailTierBarUserSelection">
									<option value="none" selected>None</option>
									<option value="basicAccountDetails">Basic Account Details</option>
									<option value="fullAccountDetails">Full Account Details</option>
								</select>
							</div>

							<hr>

							<!-- Email Hero Input -->
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<label class="input-group-text" for="emailHeroUserSelection">Select Hero</label>
								</div>
								<select onchange="emailHeroUserSelection()" class="custom-select" id="emailHeroUserSelection">
									<option value="none" selected>None</option>
									<option value="oneColumnHeroImage">One (1/1) Column Hero Image</option>
									<option value="oneHalfColumnHeroImageOneHalfColumnHeroImageNoWrap">One-half (1/2) Column Hero Image | One-half (1/2) Column Hero Image (No Wrap)</option>
									<option value="oneHalfColumnHeroImageOneHalfColumnHeroImageYesWrap">One-half (1/2) Column Hero Image | One-half (1/2) Column Hero Image (Yes Wrap)</option>
									<option value="oneColumnTwoRowHeroImage">One (1/1) Column / Two (2/1) Row Hero Image</option>
									<option value="oneHalfColumnHeroImageOneHalfeColumnHeadlineCopyCtaNoWrap">One-half (1/2) Column Hero Image | One-half (1/2) Column Headline / Copy / CTA (No Wrap)</option>
								</select>
							</div>
							<div id="emailHeroTextareaInputs"></div>

							<hr>

							<!-- Email Body Input -->
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<label class="input-group-text" for="emailBodyUserSelection">Select Body</label>
								</div>
								<select onchange="emailBodyUserSelection()" class="custom-select" id="emailBodyUserSelection">
									<option value="none" selected>None</option>
									<option value="oneColumnCopyWhiteBG">One (1/1) Column Copy (White Background)</option>
									<option value="oneColumnCopyGrayBG">One (1/1) Column Copy (Gray Background)</option>
								</select>
							</div>
							<div id="emailBodyTextareaInputs"></div>

							<hr>

							<!-- Email Footer Input -->
							<div class="input-group mb-2">
								<div class="input-group-prepend">
									<label class="input-group-text" for="emailFooterUserSelection">Select Footer</label>
								</div>
								<select onchange="emailFooterUserSelection()" class="custom-select" id="emailFooterUserSelection">
									<option value="none" selected>None</option>
									<option value="footerDefault">Default Footer</option>
								</select>
							</div>
						</div>
					</div>
					<div class="col-8">
						<div id="template-preview" class="desktop-device-preview">
							<div id="preview-temp-container">
								<div id="emailPreheaderOutput"></div>
								<div id="emailHeaderOutput"></div>
								<div id="emailTierBarOutput"></div>
								<div id="emailHeroOutput"></div>
								<div id="emailBodyOutput"></div>
								<div id="emailFooterOutput"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!--
		<section>
			<div class="container">
				<div class="row">
					<div class="col-4">
						<h3>Link Tracking Inputs</h3>
					</div>
					<div class="col-8">
						<h3>Link Tracking Preview</h3>
					</div>
				</div>
				<div class="row mb-3">
					<div class="col-4">
						<div id="link-tracking-inputs">
							<div class="input-group">
								<label for="linkTrackingNid" class="col-5 col-form-label">nid:</label>
								<div class="col-7" style="font-style: italic; overflow-x: scroll; padding: 7px 15px; white-space: nowrap;">
									<p id="linkTrackingNid" class="form-control-static" style="margin: 0;">${CONTACTS_LIST.CUSTOMER_ID_}</p>
								</div>
							</div>

							<hr>

							<div class="input-group">
								<label for="linkTrackingLanguage" class="col-5 col-form-label">language:</label>
								<div class="col-7" style="font-style: italic; overflow-x: scroll; padding: 7px 15px; white-space: nowrap;">
									<p id="linkTrackingNid" class="form-control-static" style="margin: 0;">${CONTACTS_LIST.LANGUAGE}</p>
								</div>
							</div>

							<hr>

							<div class="input-group">
								<label for="linkTrackingUtmMedium" class="col-5 col-form-label">utm_medium:</label>
								<div class="col-7" style="font-style: italic; overflow-x: scroll; padding: 7px 15px; white-space: nowrap;">
									<p id="linkTrackingUtmMedium" class="form-control-static" style="margin: 0;">email</p>
								</div>
							</div>

							<hr>

							<div class="input-group">
								<label for="linkTrackingUtmSource" class="col-5 col-form-label">utm_source:</label>
								<div class="col-7">
									<input placeholder="gha_eo" type="text" id="linkTrackingUtmSource" class="form-control">
								</div>
							</div>

							<hr>

							<div class="input-group">
								<label for="linkTrackingUtmCampaign" class="col-5 col-form-label">utm_campaign:</label>
								<div class="col-7">
									<input placeholder="exclusiveoffers_20180219" type="text" id="linkTrackingUtmCampaign" class="form-control">
								</div>
							</div>

							<hr>

							<div class="input-group">
								<label for="linkTrackingUtmContent" class="col-5 col-form-label">utm_content:</label>
								<div class="col-7" style="font-style: italic; overflow-x: scroll; padding: 7px 15px; white-space: nowrap;">
									<p id="linkTrackingUtmContent" class="form-control-static" style="margin: 0;">Defined Programmatically</p>
								</div>
							</div>
						</div>
					</div>
					<div class="col-8">
						<div id="link-tracking-preview">
						</div>
					</div>
				</div>
			</div>
		</section>
		-->

		<section>
			<div class="container mb-3">
				<div class="row">
					<div class="col-4"></div>
					<div class="col-5">
						<div class="input-group mb-2">
							<div class="input-group-prepend">
								<span class="input-group-text">Template Name</span>
							</div>
							<input type="text" id="file-name" class="form-control" />
						</div>
					</div>
					<div class="col-3 text-right">
						<button onclick="downloadInnerHtml()" type="button" class="btn btn-primary">Download Template</button>
					</div>
				</div>
			</div>
		</section>

		<!--
		<footer>
			<div class="container">
				<div class="row">
					<div class="col">
						Footer
					</div>
				</div>
			</div>
		</footer>
		-->

		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

		<!-- JavaScript to define the HTML to be downloaded by the above script -->
		<!-- Grab input from textarea and use to replace with a string somewhere else in the document -->
		<script type="text/javascript">
			// Create a new <div> tag using the createElement() method and assign to emailPreheaderInput variable
			var emailPreheaderInput = document.createElement('div');
			function emailPreheaderUserSelection() {
				// Reset <div id="emailPreheaderTextareaInputs"></div> by assigning a blank value using the innerHTML method
				document.getElementById('emailPreheaderTextareaInputs').innerHTML = "";

				// Assign the selected value of the emailPreheaderUserSelection dropdown menu to emailPreheaderUserSelection variable
				var emailPreheaderUserSelection = document.getElementById('emailPreheaderUserSelection').value;

				// Convert the emailPreheaderUserSelection value into a variable name and assign to emailPreheaderVariableName
				emailPreheaderVariableName = window[emailPreheaderUserSelection];

				// Assign the contents of emailPreheaderVariableName to emailPreheaderInput using the innerHTML method
				emailPreheaderInput.innerHTML = emailPreheaderVariableName;

				// Add the contents of the emailPreheaderInput <div> to the emailPreheaderOutput <div> using the appendChild() method
				document.getElementById('emailPreheaderOutput').appendChild(emailPreheaderInput);

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}' brackets
				var matchesArray = emailPreheaderVariableName.match(regex);
				for (i = 0; i < matchesArray.length; i++) {
					var formGroupDiv = document.createElement('div');
					formGroupDiv.setAttribute('class', 'form-group');

					var formGroupLabel = document.createElement('label');
					formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i]));
					formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').replace(/\b\w/g, first_letter => first_letter.toUpperCase()) + ':';

					var formInput = document.createElement('input');
					formInput.setAttribute('onkeyup', 'preheaderReplacement()');
					formInput.setAttribute('class', 'form-control');
					formInput.setAttribute('id', ('user_defined_' + matchesArray[i]));
					formInput.setAttribute('type', 'text');
					formInput.setAttribute('placeholder', 'Lorem ipsum dolar sit amet');

					formGroupDiv.appendChild(formGroupLabel);
					formGroupDiv.appendChild(formInput);

					document.getElementById('emailPreheaderTextareaInputs').appendChild(formGroupDiv);
				}
			}
			function preheaderReplacement() {

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}' brackets
				var matchesArray = emailPreheaderVariableName.match(regex);

				for (i = 0; i < matchesArray.length; i++) {
					var inputReplacementValue = document.getElementById('user_defined_' + matchesArray[i]).value;
					var stringToBeReplaced = document.getElementById(matchesArray[i]).innerHTML;
					var stringToReplaceWith = stringToBeReplaced.replace(stringToBeReplaced, inputReplacementValue);
					document.getElementById(matchesArray[i]).innerHTML = stringToReplaceWith;
				}
			}



			// Create a new <div> tag using the createElement() method and assign to emailHeaderInput variable
			var emailHeaderInput = document.createElement('div');
			function emailHeaderUserSelection() {
				// Reset <div id="emailHeaderTextareaInputs"></div> by assigning a blank value using the innerHTML method
				document.getElementById('emailHeaderTextareaInputs').innerHTML = "";

				// Assign the selected value of the emailHeaderUserSelection dropdown menu to emailHeaderUserSelection variable
				var emailHeaderUserSelection = document.getElementById('emailHeaderUserSelection').value;

				// Convert the emailHeaderUserSelection value into a variable name and assign to emailHeaderVariableName
				emailHeaderVariableName = window[emailHeaderUserSelection];

				// Assign the contents of emailHeaderVariableName to emailHeroInput using the innerHTML method
				emailHeaderInput.innerHTML = emailHeaderVariableName;

				// Add the contents of the emailHeaderInput <div> to the emailHeaderOutput <div> using the appendChild() method
				document.getElementById('emailHeaderOutput').appendChild(emailHeaderInput);

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}'
				var matchesArray = emailHeaderVariableName.match(regex);
				for (i = 0; i < matchesArray.length; i++) {
					var formGroupDiv = document.createElement('div');
					formGroupDiv.setAttribute('class', 'form-group');

					var formGroupLabel = document.createElement('label');
					formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i]));
					formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').replace(/\b\w/g, first_letter => first_letter.toUpperCase()) + ':';

					var formInput = document.createElement('input');
					formInput.setAttribute('onkeyup', 'headerReplacement()');
					formInput.setAttribute('class', 'form-control');
					formInput.setAttribute('id', ('user_defined_' + matchesArray[i]));
					formInput.setAttribute('type', 'text');
					formInput.setAttribute('placeholder', 'Lorem ipsum dolar sit amet');

					formGroupDiv.appendChild(formGroupLabel);
					formGroupDiv.appendChild(formInput);

					document.getElementById('emailHeaderTextareaInputs').appendChild(formGroupDiv);
				}
			}
			function headerReplacement() {
				// Assign the selected value of the emailHeaderUserSelection dropdown menu to emailHeaderUserSelection variable
				var emailHeaderUserSelection = document.getElementById('emailHeaderUserSelection').value;

				// Convert the emailHeaderUserSelection value into a variable name and assign to emailHeaderVariableName
				emailHeaderVariableName = window[emailHeaderUserSelection];

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}' brackets
				var matchesArray = emailHeaderVariableName.match(regex);

				for (i = 0; i < matchesArray.length; i++) {
					var inputReplacementValue = document.getElementById('user_defined_' + matchesArray[i]).value;
					var stringToBeReplaced = document.getElementById(matchesArray[i]).innerHTML;
					var stringToReplaceWith = stringToBeReplaced.replace(stringToBeReplaced, inputReplacementValue);
					document.getElementById(matchesArray[i]).innerHTML = stringToReplaceWith;
				}
			}



			// Create a new <div> tag using the createElement() method and assign to emailHeaderInput variable
			var emailTierBarInput = document.createElement('div');
			function emailTierBarUserSelection() {
				// Assign the selected value of the emailTierBarUserSelection dropdown menu to emailTierBarUserSelection variable
				var emailTierBarUserSelection = document.getElementById('emailTierBarUserSelection').value;

				// Convert the emailTierBarUserSelection value into a variable name and assign to emailTierBarVariableName
				emailTierBarVariableName = window[emailTierBarUserSelection];

				// Assign the contents of emailTierBarVariableName to emailTierBarInput using the innerHTML method
				emailTierBarInput.innerHTML = emailTierBarVariableName;

				// Add the contents of the emailTierBarInput <div> to the emailTierBarOutput <div> using the appendChild() method
				document.getElementById('emailTierBarOutput').appendChild(emailTierBarInput);

				// Replace the placeholder 'yyyy' with yyyy variable (defined in gha-email-builder.js)
				var currentYearElements = document.getElementsByClassName('currentYear');
				for (i = 0; i < currentYearElements.length; i++) {
					var stringToBeReplaced = currentYearElements[i].innerHTML;
					var stringToReplaceWith = stringToBeReplaced.replace('yyyy', yyyy);
					currentYearElements[i].innerHTML = stringToReplaceWith;
				}
			}



			// Create a new <div> tag using the createElement() method and assign to emailHeroInput variable
			var emailHeroInput = document.createElement('div');
			function emailHeroUserSelection() {
				// Reset <div id="emailHeroTextareaInputs"></div> by assigning a blank value using the innerHTML method
				document.getElementById('emailHeroTextareaInputs').innerHTML = "";

				// Assign the selected value of the emailHeroUserSelection dropdown menu to emailHeroUserSelection variable
				var emailHeroUserSelection = document.getElementById('emailHeroUserSelection').value;

				// Convert the emailHeroUserSelection value into a variable name and assign to emailHeroVariableName
				emailHeroVariableName = window[emailHeroUserSelection];

				// Assign the contents of emailHeroVariableName to emailHeroInput using the innerHTML method
				emailHeroInput.innerHTML = emailHeroVariableName;

				// Add the contents of the emailHeroInput <div> to the emailHeroOutput <div> using the appendChild() method
				document.getElementById('emailHeroOutput').appendChild(emailHeroInput);

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}' brackets
				var matchesArray = emailHeroVariableName.match(regex);
				for (i = 0; i < matchesArray.length; i++) {
					if (document.getElementById(matchesArray[i]).nodeName == "A") {
						var formGroupDiv = document.createElement('div');
						formGroupDiv.setAttribute('class', 'form-group');

						var formGroupLabel = document.createElement('label');
						formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i] + '_text'));
						formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').toUpperCase() + ' Text:';

						var formInput = document.createElement('input');
						formInput.setAttribute('onkeyup', 'heroReplacement()');
						formInput.setAttribute('class', 'form-control');
						formInput.setAttribute('id', ('user_defined_' + matchesArray[i] + '_text'));
						formInput.setAttribute('type', 'text');
						formInput.setAttribute('placeholder', 'LEARN MORE');

						formGroupDiv.appendChild(formGroupLabel);
						formGroupDiv.appendChild(formInput);

						document.getElementById('emailHeroTextareaInputs').appendChild(formGroupDiv);

						var formGroupDiv = document.createElement('div');
						formGroupDiv.setAttribute('class', 'form-group');

						var formGroupLabel = document.createElement('label');
						formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i] + '_url'));
						formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').toUpperCase() + ' URL:';

						var formInput = document.createElement('input');
						formInput.setAttribute('onkeyup', 'heroReplacement()');
						formInput.setAttribute('class', 'form-control');
						formInput.setAttribute('id', ('user_defined_' + matchesArray[i] + '_url'));
						formInput.setAttribute('type', 'url');
						formInput.setAttribute('placeholder', 'https://www.discoveryloyalty.com/');

						formGroupDiv.appendChild(formGroupLabel);
						formGroupDiv.appendChild(formInput);

						document.getElementById('emailHeroTextareaInputs').appendChild(formGroupDiv);
					} else if (document.getElementById(matchesArray[i]).nodeName == "IMG") {
						var formGroupDiv = document.createElement('div');
						formGroupDiv.setAttribute('class', 'form-group');

						var formGroupLabel = document.createElement('label');
						formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i] + '_src'));
						formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').replace(/\b\w/g, first_letter => first_letter.toUpperCase()) + ' Source URL:';

						var formInput = document.createElement('input');
						formInput.setAttribute('onblur', 'heroReplacement()');
						formInput.setAttribute('class', 'form-control');
						formInput.setAttribute('id', ('user_defined_' + matchesArray[i] + '_src'));
						formInput.setAttribute('type', 'url');
						formInput.setAttribute('placeholder', 'http://www.domain.com/image-name.jpg/');

						formGroupDiv.appendChild(formGroupLabel);
						formGroupDiv.appendChild(formInput);

						document.getElementById('emailHeroTextareaInputs').appendChild(formGroupDiv);
					} else {
						var formGroupDiv = document.createElement('div');
						formGroupDiv.setAttribute('class', 'form-group');

						var formGroupLabel = document.createElement('label');
						formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i]));
						formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').replace(/\b\w/g, first_letter => first_letter.toUpperCase()) + ':';

						var formInput = document.createElement('input');
						formInput.setAttribute('onkeyup', 'heroReplacement()');
						formInput.setAttribute('class', 'form-control');
						formInput.setAttribute('id', ('user_defined_' + matchesArray[i]));
						formInput.setAttribute('type', 'text');
						formInput.setAttribute('placeholder', 'Lorem ipsum dolar sit amet');

						formGroupDiv.appendChild(formGroupLabel);
						formGroupDiv.appendChild(formInput);

						document.getElementById('emailHeroTextareaInputs').appendChild(formGroupDiv);
					}
				}
			}
			function heroReplacement() {
				// Assign the selected value of the emailHeroUserSelection dropdown menu to emailHeroUserSelection variable
				var emailHeroUserSelection = document.getElementById('emailHeroUserSelection').value;

				// Convert the emailHeroUserSelection value into a variable name and assign to emailHeroVariableName
				emailHeroVariableName = window[emailHeroUserSelection];

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}' brackets
				var matchesArray = emailHeroVariableName.match(regex);
				for (i = 0; i < matchesArray.length; i++) {
					if (document.getElementById(matchesArray[i]).nodeName == "A") {
						var inputReplacementValue = document.getElementById('user_defined_' + (matchesArray[i] + '_text')).value;
						var stringToBeReplaced = document.getElementById(matchesArray[i]).innerHTML;
						var stringToReplaceWith = stringToBeReplaced.replace(stringToBeReplaced, inputReplacementValue);
						document.getElementById(matchesArray[i]).innerHTML = stringToReplaceWith;

						var heroTdWidth = inputReplacementValue.length * 13;
						document.getElementById("heroTdWidth").style.width = heroTdWidth + 'px';

						var heroTableWidth = heroTdWidth + 50;
						document.getElementById("heroTableWidth").style.width = heroTableWidth + 'px';
						document.getElementById("heroTableWidth").setAttribute('width', heroTableWidth);

						var inputReplacementHref = document.getElementById('user_defined_' + (matchesArray[i] + '_url')).value;
						var hrefToBeReplaced = document.getElementById(matchesArray[i]).href; 
						var hrefToReplaceWith = hrefToBeReplaced.replace(hrefToBeReplaced, inputReplacementHref);
						document.getElementById(matchesArray[i]).setAttribute("href", hrefToReplaceWith);
					} else if (document.getElementById(matchesArray[i]).nodeName == "IMG") {
						var inputReplacementSrc = document.getElementById('user_defined_' + matchesArray[i] + '_src').value;
						var srcToBeReplaced = document.getElementById(matchesArray[i]).src; 
						var srcToReplaceWith = srcToBeReplaced.replace(srcToBeReplaced, inputReplacementSrc);
						document.getElementById(matchesArray[i]).setAttribute("src", srcToReplaceWith);
					} else {
						var inputReplacementValue = document.getElementById('user_defined_' + matchesArray[i]).value;
						var stringToBeReplaced = document.getElementById(matchesArray[i]).innerHTML;
						var stringToReplaceWith = stringToBeReplaced.replace(stringToBeReplaced, inputReplacementValue);
						document.getElementById(matchesArray[i]).innerHTML = stringToReplaceWith;
					}
				}
			}



			// Create a new <div> tag using the createElement() method and assign to emailBodyInput variable
			var emailBodyInput = document.createElement('div');
			function emailBodyUserSelection() {
				// Reset <div id="emailBodyTextareaInputs"></div> by assigning a blank value using the innerHTML method
				document.getElementById('emailBodyTextareaInputs').innerHTML = "";

				// Assign the selected value of the emailBodyUserSelection dropdown menu to emailBodyUserSelection variable
				var emailBodyUserSelection = document.getElementById('emailBodyUserSelection').value;

				// Convert the emailBodyUserSelection value into a variable name and assign to emailBodyVariableName
				emailBodyVariableName = window[emailBodyUserSelection];

				// Assign the contents of emailBodyVariableName to emailBodyInput using the innerHTML method
				emailBodyInput.innerHTML = emailBodyVariableName;

				// Add the contents of the emailBodyInput <div> to the emailBodyOutput <div> using the appendChild() method
				document.getElementById('emailBodyOutput').appendChild(emailBodyInput);

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}' brackets
				var matchesArray = emailBodyVariableName.match(regex);
				for (i = 0; i < matchesArray.length; i++) {
					if (document.getElementById(matchesArray[i]).nodeName == "A") {
						var formGroupDiv = document.createElement('div');
						formGroupDiv.setAttribute('class', 'form-group');

						var formGroupLabel = document.createElement('label');
						formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i] + '_text'));
						formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').toUpperCase() + ' Text:';

						var formInput = document.createElement('input');
						formInput.setAttribute('onkeyup', 'bodyReplacement()');
						formInput.setAttribute('class', 'form-control');
						formInput.setAttribute('id', ('user_defined_' + matchesArray[i] + '_text'));
						formInput.setAttribute('type', 'text');
						formInput.setAttribute('placeholder', 'LEARN MORE');

						formGroupDiv.appendChild(formGroupLabel);
						formGroupDiv.appendChild(formInput);

						document.getElementById('emailBodyTextareaInputs').appendChild(formGroupDiv);

						var formGroupDiv = document.createElement('div');
						formGroupDiv.setAttribute('class', 'form-group');

						var formGroupLabel = document.createElement('label');
						formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i] + '_url'));
						formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').toUpperCase() + ' URL:';

						var formInput = document.createElement('input');
						formInput.setAttribute('onkeyup', 'bodyReplacement()');
						formInput.setAttribute('class', 'form-control');
						formInput.setAttribute('id', ('user_defined_' + matchesArray[i] + '_url'));
						formInput.setAttribute('type', 'url');
						formInput.setAttribute('placeholder', 'https://www.discoveryloyalty.com/');

						formGroupDiv.appendChild(formGroupLabel);
						formGroupDiv.appendChild(formInput);

						document.getElementById('emailBodyTextareaInputs').appendChild(formGroupDiv);
					} else {
						var formGroupDiv = document.createElement('div');
						formGroupDiv.setAttribute('class', 'form-group');

						var formGroupLabel = document.createElement('label');
						formGroupLabel.setAttribute('for', ('user_defined_' + matchesArray[i]));
						formGroupLabel.textContent = (matchesArray[i]).replace(/_/g, ' ').replace(/\b\w/g, first_letter => first_letter.toUpperCase()) + ':';

						var formInput = document.createElement('input');
						formInput.setAttribute('onkeyup', 'bodyReplacement()');
						formInput.setAttribute('class', 'form-control');
						formInput.setAttribute('id', ('user_defined_' + matchesArray[i]));
						formInput.setAttribute('type', 'text');
						formInput.setAttribute('placeholder', 'Lorem ipsum dolar sit amet');

						formGroupDiv.appendChild(formGroupLabel);
						formGroupDiv.appendChild(formInput);

						document.getElementById('emailBodyTextareaInputs').appendChild(formGroupDiv);
					}
				}
			}
			function bodyReplacement() {
				// Assign the selected value of the emailBodyUserSelection dropdown menu to emailBodyUserSelection variable
				var emailBodyUserSelection = document.getElementById('emailBodyUserSelection').value;

				// Convert the emailBodyUserSelection value into a variable name and assign to emailBodyVariableName
				emailBodyVariableName = window[emailBodyUserSelection];

				var regex = /(?<=\{)(.*?)(?=\})/g; // match string between '{' and '}' brackets
				var matchesArray = emailBodyVariableName.match(regex);
				for (i = 0; i < matchesArray.length; i++) {
					if (document.getElementById(matchesArray[i]).nodeName == "A") {
						var inputReplacementValue = document.getElementById('user_defined_' + (matchesArray[i] + '_text')).value;
						var stringToBeReplaced = document.getElementById(matchesArray[i]).innerHTML;
						var stringToReplaceWith = stringToBeReplaced.replace(stringToBeReplaced, inputReplacementValue);
						document.getElementById(matchesArray[i]).innerHTML = stringToReplaceWith;

						var tdWidth = inputReplacementValue.length * 13;
						document.getElementById("tdWidth").style.width = tdWidth + 'px';

						var tableWidth = tdWidth + 50;
						document.getElementById("tableWidth").style.width = tableWidth + 'px';
						document.getElementById("tableWidth").setAttribute('width', tableWidth);

						var inputReplacementHref = document.getElementById('user_defined_' + (matchesArray[i] + '_url')).value;
						var hrefToBeReplaced = document.getElementById(matchesArray[i]).href; 
						var hrefToReplaceWith = hrefToBeReplaced.replace(hrefToBeReplaced, inputReplacementHref);
						document.getElementById(matchesArray[i]).setAttribute("href", hrefToReplaceWith);
					} else {
						var inputReplacementValue = document.getElementById('user_defined_' + matchesArray[i]).value;
						var stringToBeReplaced = document.getElementById(matchesArray[i]).innerHTML;
						var stringToReplaceWith = stringToBeReplaced.replace(stringToBeReplaced, inputReplacementValue);
						document.getElementById(matchesArray[i]).innerHTML = stringToReplaceWith;
					}
				}
			}



			// Create a new <div> tag using the createElement() method and assign to emailFooterInput variable
			var emailFooterInput = document.createElement('div');
			function emailFooterUserSelection() {
				// Assign the selected value of the emailFooterUserSelection dropdown menu to emailFooterUserSelection variable
				var emailFooterUserSelection = document.getElementById('emailFooterUserSelection').value;

				// Convert the emailFooterUserSelection value into a variable name and assign to emailFooterVariableName
				emailFooterVariableName = window[emailFooterUserSelection];

				// Assign the contents of emailFooterVariableName to emailFooterInput using the innerHTML method
				emailFooterInput.innerHTML = emailFooterVariableName;

				// Add the contents of the emailFooterInput <div> to the emailFooterOutput <div> using the appendChild() method
				document.getElementById('emailFooterOutput').appendChild(emailFooterInput);

				// Replace the placeholder 'yyyy' with yyyy variable (defined in gha-email-builder.js)
				var currentYearElements = document.getElementsByClassName('currentYear');
				for (i = 0; i < currentYearElements.length; i++) {
					var stringToBeReplaced = currentYearElements[i].innerHTML;
					var stringToReplaceWith = stringToBeReplaced.replace('yyyy', yyyy);
					currentYearElements[i].innerHTML = stringToReplaceWith;
				}
			}
		</script>
	</body>
</html>